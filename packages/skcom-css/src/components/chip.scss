////
/// Chips are pieces of content that are either dynamically generated or
/// provided by the user.
///
/// Note:
/// - There is no entry for Chip in the SKCom documentation.
/// - This file is a compilation of 4 types of Chips. More details on each
///   below.
////

@use "sass:math";
@use "../abstracts/mixins.scss" as mix;
@use "../abstracts/typography.scss" as type;
@use "../components/icon.scss" as ci;

// ATTENTION:
// Selecters prefixed with _ are private classes for use in this file only.
// Do not use these classes in any other file within this libary, or any
// other libraries.
//
// Explaination:
// Since these classes will not be used in libraries wrapping this library,
// using private placeholder selectors (%_class) would make more sense. We’re
// not using them because we have many instances of complex selectors that
// placeholder selectors can’t handle.

/// @access private
._skc-chip {
  @include mix.transition(
    border-color background-color,
    var(--motion-short-4),
    var(--easing-standard)
  );
  position: relative;
  display: flex;
  overflow: hidden;
  align-items: center;
  flex-direction: row;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.375rem 1rem;
  cursor: pointer;
  color: var(--on-surface);
  border: 1px solid var(--outline);
  border-radius: 0.5rem;
  background-color: transparent;
  -webkit-tap-highlight-color: transparent;

  // State layer
  &::before {
    @include mix.state-layer();
    background-color: var(--on-surface-variant);
  }

  &:hover::before {
    opacity: 0.08;
  }

  &:focus,
  &:active {
    &::before {
      opacity: 0.12;
    }
  }

  &:has(._skc-chip__icon:first-child) {
    padding-left: 0.5rem;
  }

  &:has(._skc-chip__icon:last-child) {
    padding-right: 0.5rem;
  }

  // Disabled
  &[aria-disabled="true"] {
    cursor: default;
    opacity: 0.38;
    color: var(--on-surface);
    border-color: transparent;

    &::before {
      opacity: math.div(0.12, 0.38);
      border: 1px solid var(--on-surface);
      background-color: transparent;
    }

    ._skc-chip__ripple {
      background-color: transparent;
    }

    ._skc-chip__icon .skc-icon {
      color: var(--on-surface);
    }
  }
}

// Elevated
/// @access private
._skc-chip--elevated {
  border: none;
  background-color: var(--surface-1);
  box-shadow: var(--shadow-1);

  &[aria-disabled="true"] {
    color: var(--on-surface);
    background-color: transparent;
    box-shadow: none;

    &::before {
      border: none;
      background-color: var(--on-surface);
    }
  }
}

// Dangerous

/// @access private
._skc-chip--dangerous {
  ._skc-chip__icon .skc-icon {
    color: var(--error);
  }
}

// Selected

/// @access private
._skc-chip--selected {
  color: var(--on-secondary-container);
  border-color: transparent;
  background-color: var(--secondary-container);
}

// Label

/// @access private
._skc-chip__label {
  @include type.font("label-large");
  font-family: var(--font-display);
  white-space: nowrap;
}

// Icon

/// @access private
._skc-chip__icon {
  width: 1.125rem;
  height: 1.125rem;
  color: var(--primary);

  .skc-icon {
    @include ci.icon(0, 400, 0, 20);
    font-size: 1.125rem;
  }
}

// Ripple

/// @access private
._skc-chip__ripple {
  @include mix.ripple();
  background-color: var(--on-surface-variant);
}

/// **Assist Chip**
/// Assist Chips are similar to Buttons in that it helps users take action. The
/// difference is a Button is persistent (doesn’t change) and an Assist Chip is
/// dynamic and contextual (changes according to the context).
///
/// @link https://docs.google.com/document/d/1UJeTpXcB2MBL9Df4GUUeZ78xb-RshNIC_-LCIKmCo-8/edit?usp=sharing#heading=h.6b3bv92d22u9 SKCom documentation

.skc-assist-chip {
  @extend ._skc-chip;

  // With icon padding
  &:has(.skc-assist-chip__icon:first-child) {
    padding-left: 0.5rem;
  }

  // Dangerous
  &:not([aria-disabled="true"]).skc-assist-chip--dangerous {
    @extend ._skc-chip--dangerous;
  }
}

.skc-assist-chip.skc-assist-chip--elevated {
  @extend ._skc-chip--elevated;
}

.skc-assist-chip__label {
  @extend ._skc-chip__label;
}

.skc-assist-chip__icon {
  @extend ._skc-chip__icon;
}

.skc-assist-chip__ripple {
  @extend ._skc-chip__ripple;
}

/// **Filter Chip**
///
/// A set of Filter Chips provide product-authored options to narrow down
/// content. A Filter Chip should never appear alone and should be a child of
/// Chip Set.
///
/// @link https://docs.google.com/document/d/1UJeTpXcB2MBL9Df4GUUeZ78xb-RshNIC_-LCIKmCo-8/edit?usp=sharing#heading=h.vps8muzdcylu SKCom documentation

.skc-filter-chip {
  // TODO
}

/// **Input Chip**
///
/// A Chip displaying a piece of information entered by the user is an Input
/// Chip. This type of Chip can be added, edited, and deleted by the user.
///
/// Like all Chips, an Input Chip appears alongside other Input Chips, but
/// these can also appear inside a text field like in Chip Field.
///
/// @link https://docs.google.com/document/d/1UJeTpXcB2MBL9Df4GUUeZ78xb-RshNIC_-LCIKmCo-8/edit?usp=sharing#heading=h.qr7x5m70pqd SKCom documentation

.skc-input-chip {
  @extend ._skc-chip;
  cursor: initial;

  // Delete button
  .skc-button:has(.skc-button__icon):not(:has(.skc-button__label)) {
    padding: 0.1875rem;
    color: var(--on-surface);

    .skc-button__icon {
      width: 1.125rem;
      height: 1.125rem;
    }

    .skc-button__icon .skc-icon,
    &:hover .skc-button__icon .skc-icon,
    &:active .skc-button__icon .skc-icon {
      font-size: 1.125rem;
    }

    &::before,
    .skc-button__ripple {
      background-color: var(--on-surface);
    }
  }

  // State layer
  &::before {
    background-color: transparent;
  }

  // With avatar padding
  &:has(.skc-input-chip__avatar:first-child) {
    padding-block: 0.25rem;
    padding-left: 0.25rem;
    border-radius: var(--rounded-full);

    // With avatar and close padding
    &:has(.skc-button:last-child) {
      padding-block: 0.25rem;
      padding-right: 0.25rem;
    }
  }

  // With icon padding
  &:has(.skc-input-chip__icon:first-child) {
    padding-left: 0.5rem;
  }

  // With close padding
  &:has(.skc-button:last-child) {
    padding-block: 0.25rem;
    padding-right: 0.25rem;
  }
}

// Input Chip label
.skc-input-chip__label {
  @extend ._skc-chip__label;
}

// Input Chip avatar
.skc-input-chip__avatar {
  width: 1.5rem;
  height: 1.5rem;

  .skc-avatar {
    width: 100%;
    height: 100%;
  }
}

// Input Chip in edit mode
.skc-input-chip__input {
  @include type.font("label-large");
  padding-block: 0.375rem;
  outline: none;
  background-color: transparent;
}

// Selected Input Chip
.skc-input-chip--selected {
  @extend ._skc-chip--selected;

  .skc-input-chip__avatar {
    color: var(--on-secondary);
    border-radius: var(--rounded-full);
    background-color: var(--on-secondary-container);
  }

  .skc-button {
    color: var(--on-secondary-container);

    &::before,
    .skc-button__ripple {
      background-color: var(--on-secondary-container);
    }
  }
}

.skc-input-chip__icon {
  @extend ._skc-chip__icon;
}

// Clickable Input Chip
button.skc-input-chip {
  cursor: pointer;

  &::before {
    background-color: var(--on-surface);
  }

  .skc-input-chip__ripple {
    @extend ._skc-chip__ripple;
  }
}
